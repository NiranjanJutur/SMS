# Project Overview: Sri Manjunatha Stores (SMS) App

This document provides a comprehensive structured overview of the SMS mobile application codebase, designed for handover to another AI assistant or developer.

## 1. Project Mission
The SMS App is a modern grocery management system built for local store owners. It transforms a traditional shop into a smart business using AI-powered automation and cloud sync.

## 2. Technology Stack
- **Framework**: React Native (with TypeScript)
- **Backend**: Firebase (Firestore, Auth, Storage)
- **AI Engine**: Google Gemini (Flash 1.5)
- **Local Persistence**: AsyncStorage (Offline-first architecture)
- **Styling**: Vanilla CSS-in-JS (Custom Theme System)

## 3. Core Architecture
The app follows a service-oriented architecture with a clean separation between UI components, business logic (hooks), and data layers.

### Key Directories:
- `src/screens`: Main UI screens (Home, Billing, Inventory, Customers, Dashboard).
- `src/services`: 
    - `ai/`: Gemini AI integration logic for Vision and natural language.
    - `firebase/`: Firestore data layer and configuration.
    - `local/`: AsyncStorage-based local data service for offline use.
- `src/hooks`: Custom React hooks managing global state (Cart, Voice, Scanner).
- `src/models`: TypeScript interfaces defining the data structure (Product, Transaction, Customer).
- `src/config`: App-wide constants, theme tokens, and API keys.

## 4. Groundbreaking Features
### AI-Powered Automation
- **üì∏ Product Recognition**: Point the camera at an item to automatically identify and price it using Gemini Vision (`src/services/ai/scannerService.ts`).
- **üìù handwritten Slip Extraction**: Extract structured items and quantities from photos of handwritten customer lists (`src/screens/home/SlipProcessingScreen.tsx`).
- **üé§ Smart Voice Commands**: Natural language parsing using Gemini LLM to add items by voice, e.g., "Add 2kg sugar" (`src/hooks/useVoice.ts`).

### Smart Data Management
- **Dual-Data Mode**: The app can switch between `LOCAL` and `FIREBASE` modes via a single toggle in `src/services/firebase/firestoreService.ts`.
- **Cloud Sync**: Real-time synchronization of inventory, customer balances (Udhaar), and transactions to Firestore.

## 5. Critical Files for Onboarding
| File Path | Purpose |
| :--- | :--- |
| `src/config/api_keys.ts` | Stores Gemini API and other sensitive keys. |
| `src/services/firebase/config.ts` | Main Firebase initialization (includes Emulator stability fixes). |
| `src/services/firebase/firestoreService.ts` | The "Brain" of data routing (Toggle between Local/Firebase). |
| `src/services/ai/geminiService.ts` | Core AI interaction logic and prompts. |
| `android/app/google-services.json` | Native Firebase credentials (Must match `config.ts`). |

## 6. How to Run & Build
- **Dev Server**: `npx react-native start`
- **Build Standalone APK**:
    1. Bundle assets: `npx react-native bundle --platform android --dev false --entry-file index.js --bundle-output android/app/src/main/assets/index.android.bundle --assets-dest android/app/src/main/res/`
    2. Build APK: `cd android; ./gradlew.bat assembleRelease`

## 7. Next Steps for Development
- [ ] Implement Push Notifications for low-stock alerts.
- [ ] Add WhatsApp integration for sending digital bills.
- [ ] Develop the Accountant Dashboard with PDF export features.
- [ ] Enhance Gemini prompts for higher OCR accuracy on complex handwriting.

---
*Documentation generated by Antigravity AI.*
